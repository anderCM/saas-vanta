<div class="max-w-4xl mx-auto py-8 px-4">
  <div class="flex items-center justify-between mb-8">
    <div>
      <div class="flex items-center gap-3">
        <h1 class="text-2xl font-bold text-foreground"><%= @customer.name %></h1>
      </div>
      <p class="mt-1 text-sm text-muted-foreground">
        <% if @customer.tax_id.present? %>
          <%= @customer.tax_id_type.upcase %>: <%= @customer.tax_id %> |
        <% end %>
        Registrado <%= time_ago_in_words(@customer.created_at) %> atras
      </p>
    </div>
    <div class="flex gap-3">
      <%= link_to "Volver", customers_path, class: "btn-secondary" %>
      <% if policy(@customer).update? %>
        <%= link_to "Editar", edit_customer_path(@customer), class: "btn-primary" %>
      <% end %>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <div class="lg:col-span-2 space-y-6">
      <div class="card">
        <h3 class="text-lg font-medium text-foreground mb-4">Informacion General</h3>
        <dl class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <dt class="text-sm font-medium text-muted-foreground">Nombre</dt>
            <dd class="mt-1 text-sm text-foreground"><%= @customer.name %></dd>
          </div>
          <div>
            <dt class="text-sm font-medium text-muted-foreground">Tipo de Documento</dt>
            <dd class="mt-1 text-sm text-foreground">
              <% if @customer.no_document? %>
                <span class="text-muted-foreground">Sin documento</span>
              <% else %>
                <%= @customer.tax_id_type.upcase %>
              <% end %>
            </dd>
          </div>
          <div>
            <dt class="text-sm font-medium text-muted-foreground">Numero de Documento</dt>
            <dd class="mt-1 text-sm text-foreground font-mono"><%= @customer.tax_id.presence || "-" %></dd>
          </div>
          <div>
            <dt class="text-sm font-medium text-muted-foreground">Direccion</dt>
            <dd class="mt-1 text-sm text-foreground"><%= @customer.address.presence || "-" %></dd>
          </div>
        </dl>
      </div>

      <div class="card">
        <h3 class="text-lg font-medium text-foreground mb-4">Contacto</h3>
        <dl class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <dt class="text-sm font-medium text-muted-foreground">Email</dt>
            <dd class="mt-1 text-sm text-foreground">
              <% if @customer.email.present? %>
                <%= mail_to @customer.email, @customer.email, class: "text-primary hover:underline" %>
              <% else %>
                -
              <% end %>
            </dd>
          </div>
          <div>
            <dt class="text-sm font-medium text-muted-foreground">Telefono</dt>
            <dd class="mt-1 text-sm text-foreground">
              <% if @customer.phone_number.present? %>
                <%= link_to @customer.phone_number, "tel:#{@customer.phone_number}", class: "text-primary hover:underline" %>
              <% else %>
                -
              <% end %>
            </dd>
          </div>
        </dl>
      </div>
    </div>

    <div class="space-y-6">
      <div class="card">
        <h3 class="text-lg font-medium text-foreground mb-4">Condiciones Comerciales</h3>
        <dl class="space-y-4">
          <div>
            <dt class="text-sm font-medium text-muted-foreground">Limite de Credito</dt>
            <dd class="mt-1 text-2xl font-bold text-foreground">
              <% if @customer.credit_limit > 0 %>
                S/ <%= number_with_precision(@customer.credit_limit, precision: 2, delimiter: ",") %>
              <% else %>
                <span class="text-muted-foreground text-base">Sin credito</span>
              <% end %>
            </dd>
          </div>
          <div>
            <dt class="text-sm font-medium text-muted-foreground">Dias de Credito</dt>
            <dd class="mt-1 text-lg font-semibold text-foreground">
              <% if @customer.payment_terms > 0 %>
                <%= @customer.payment_terms %> dias
              <% else %>
                <span class="text-muted-foreground text-base">Solo contado</span>
              <% end %>
            </dd>
          </div>
        </dl>
      </div>

      <% if policy(@customer).destroy? %>
        <div class="card">
          <h3 class="text-lg font-medium text-foreground mb-4">Zona de Peligro</h3>
          <%= button_to "Eliminar Cliente",
              @customer,
              method: :delete,
              class: "w-full btn-destructive",
              data: { turbo_confirm: "Estas seguro de eliminar este cliente? Esta accion no se puede deshacer." } %>
        </div>
      <% end %>
    </div>
  </div>
</div>
